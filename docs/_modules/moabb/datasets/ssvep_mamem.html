<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>moabb.datasets.ssvep_mamem &#8212; moabb 0.4.3 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-rendered-html.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          moabb</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.3</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../whats_new.html">What's new</a></li>
                <li><a href="../../../api.html">API</a></li>
                <li><a href="../../../auto_examples/index.html">Gallery</a></li>
                <li><a href="../../../auto_tutorials/index.html">Tutorials</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../whats_new.html">Whatâ€™s new</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#develop-branch">Develop branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-3-stable-pypi">Version - 0.4.3 (Stable - PyPi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-2">Version - 0.4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-1">Version - 0.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-0">Version - 0.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-3-0">Version 0.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-2-1">Version 0.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-2-0">Version 0.2.0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Main classes of MOABB:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../datasets.html">Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#motor-imagery-datasets">Motor Imagery Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#erp-datasets">ERP Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#ssvep-datasets">SSVEP Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../evaluations.html">Evaluations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../evaluations.html#id1">Evaluations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../evaluations.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../paradigms.html">Paradigms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#motor-imagery-paradigms">Motor Imagery Paradigms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#p300-paradigms">P300 Paradigms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#ssvep-paradigms">SSVEP Paradigms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../pipelines.html">Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pipelines.html#id1">Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pipelines.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../analysis.html">Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../analysis.html#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analysis.html#statistics">Statistics</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <h1>Source code for moabb.datasets.ssvep_mamem</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SSVEP MAMEM1 dataset.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">osp</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pooch</span>
<span class="kn">from</span> <span class="nn">mne</span> <span class="kn">import</span> <span class="n">create_info</span>
<span class="kn">from</span> <span class="nn">mne.channels</span> <span class="kn">import</span> <span class="n">make_standard_montage</span>
<span class="kn">from</span> <span class="nn">mne.io</span> <span class="kn">import</span> <span class="n">RawArray</span>
<span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">loadmat</span>

<span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="n">BaseDataset</span>
<span class="kn">from</span> <span class="nn">.download</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">fs_get_file_hash</span><span class="p">,</span>
    <span class="n">fs_get_file_id</span><span class="p">,</span>
    <span class="n">fs_get_file_list</span><span class="p">,</span>
    <span class="n">fs_get_file_name</span><span class="p">,</span>
    <span class="n">get_dataset_path</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">MAMEM_URL</span> <span class="o">=</span> <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span>
<span class="c1"># Specific release</span>
<span class="c1"># MAMEM1_URL = &#39;https://ndownloader.figshare.com/articles/2068677/versions/6&#39;</span>
<span class="c1"># MAMEM2_URL = &#39;https://ndownloader.figshare.com/articles/3153409/versions/4&#39;</span>
<span class="c1"># MAMEM3_URL = &#39;https://ndownloader.figshare.com/articles/3413851/versions/3&#39;</span>

<span class="c1"># Alternate Download Location</span>
<span class="c1"># MAMEM1_URL = &quot;https://archive.physionet.org/physiobank/database/mssvepdb/dataset1/&quot;</span>
<span class="c1"># MAMEM2_URL = &quot;https://archive.physionet.org/physiobank/database/mssvepdb/dataset2/&quot;</span>
<span class="c1"># MAMEM3_URL = &quot;https://archive.physionet.org/physiobank/database/mssvepdb/dataset3/&quot;</span>


<span class="k">def</span> <span class="nf">mamem_event</span><span class="p">(</span><span class="n">eeg</span><span class="p">,</span> <span class="n">dins</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert DIN field into events</span>

<span class="sd">    Code adapted from https://github.com/MAMEM/eeg-processing-toolbox</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">thres_split</span> <span class="o">=</span> <span class="mi">2000</span>
    <span class="n">timestamps</span> <span class="o">=</span> <span class="n">dins</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span>
    <span class="n">samples</span> <span class="o">=</span> <span class="n">dins</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span>
    <span class="n">numDins</span> <span class="o">=</span> <span class="n">dins</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">sampleA</span> <span class="o">=</span> <span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">previous</span> <span class="o">=</span> <span class="n">timestamps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">t_start</span><span class="p">,</span> <span class="n">freqs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">s</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numDins</span><span class="p">):</span>
        <span class="n">current</span> <span class="o">=</span> <span class="n">timestamps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">current</span> <span class="o">-</span> <span class="n">previous</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">thres_split</span><span class="p">:</span>
            <span class="n">sampleB</span> <span class="o">=</span> <span class="n">samples</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">freqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span> <span class="o">//</span> <span class="n">c</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">sampleB</span> <span class="o">-</span> <span class="n">sampleA</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">382</span><span class="p">:</span>
                <span class="n">t_start</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sampleA</span><span class="p">)</span>
            <span class="n">sampleA</span> <span class="o">=</span> <span class="n">samples</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="p">(</span><span class="n">current</span> <span class="o">-</span> <span class="n">previous</span><span class="p">)</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">previous</span> <span class="o">=</span> <span class="n">timestamps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">sampleB</span> <span class="o">=</span> <span class="n">samples</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">freqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span> <span class="o">//</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">t_start</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sampleA</span><span class="p">)</span>
    <span class="n">freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">freqs</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="n">freqs</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">//</span> <span class="n">freqs</span>
    <span class="n">t_start</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">t_start</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">freqs_labels</span> <span class="o">=</span> <span class="p">{</span><span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">f</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">freqs</span><span class="p">,</span> <span class="n">t_start</span><span class="p">):</span>
            <span class="n">eeg</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">freqs_labels</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">f</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">t_start</span><span class="p">):</span>
            <span class="n">eeg</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>
    <span class="k">return</span> <span class="n">eeg</span>


<span class="k">class</span> <span class="nc">BaseMAMEM</span><span class="p">(</span><span class="n">BaseDataset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for MAMEM datasets&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">sessions_per_subject</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">doi</span><span class="p">,</span> <span class="n">figshare_id</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)),</span>
            <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;ssvep&quot;</span><span class="p">,</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="n">sessions_per_subject</span><span class="p">,</span>
            <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="n">doi</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figshare_id</span> <span class="o">=</span> <span class="n">figshare_id</span>

    <span class="k">def</span> <span class="nf">_get_single_subject_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return data for a single subject&quot;&quot;&quot;</span>
        <span class="n">fnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_path</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">filelist</span> <span class="o">=</span> <span class="n">fs_get_file_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figshare_id</span><span class="p">)</span>
        <span class="n">fsn</span> <span class="o">=</span> <span class="n">fs_get_file_name</span><span class="p">(</span><span class="n">filelist</span><span class="p">)</span>
        <span class="n">sessions</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">fpath</span> <span class="ow">in</span> <span class="n">fnames</span><span class="p">:</span>
            <span class="n">fnamed</span> <span class="o">=</span> <span class="n">fsn</span><span class="p">[</span><span class="n">osp</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">fpath</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">fnamed</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">session_name</span> <span class="o">=</span> <span class="s2">&quot;session_&quot;</span> <span class="o">+</span> <span class="n">fnamed</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s2">&quot;SSVEP MAMEM3&quot;</span><span class="p">:</span>
                <span class="c1"># Since the data for each session is saved in 2 files,</span>
                <span class="c1"># it is being saved in 2 runs</span>
                <span class="n">run_number</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">fnamed</span><span class="p">)</span> <span class="o">-</span> <span class="mi">10</span>
                <span class="n">run_name</span> <span class="o">=</span> <span class="s2">&quot;run_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">run_number</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">run_name</span> <span class="o">=</span> <span class="s2">&quot;run_0&quot;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s2">&quot;SSVEP MAMEM3&quot;</span><span class="p">:</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span>
                <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">][</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">sfreq</span> <span class="o">=</span> <span class="mi">128</span>
                <span class="n">montage</span> <span class="o">=</span> <span class="n">make_standard_montage</span><span class="p">(</span><span class="s2">&quot;standard_1020&quot;</span><span class="p">)</span>
                <span class="n">eeg</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="n">squeeze_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;E</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">256</span><span class="p">)]</span>
                <span class="n">ch_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;stim&quot;</span><span class="p">)</span>
                <span class="c1"># ch_names = [&quot;{}-{}&quot;.format(s, i) if s == &quot;EEG&quot; else s</span>
                <span class="c1">#             for i, s in enumerate(record.sig_name)]</span>
                <span class="n">sfreq</span> <span class="o">=</span> <span class="mi">250</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s2">&quot;SSVEP MAMEM2&quot;</span><span class="p">:</span>
                    <span class="n">labels</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">labels</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">eeg</span> <span class="o">=</span> <span class="n">mamem_event</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;DIN_1&quot;</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
                <span class="n">montage</span> <span class="o">=</span> <span class="n">make_standard_montage</span><span class="p">(</span><span class="s2">&quot;GSN-HydroCel-256&quot;</span><span class="p">)</span>
            <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ch_names</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">create_info</span><span class="p">(</span><span class="n">ch_names</span><span class="p">,</span> <span class="n">sfreq</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">)</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">RawArray</span><span class="p">(</span><span class="n">eeg</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span><span class="p">(</span><span class="n">montage</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">session_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sessions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">sessions</span><span class="p">[</span><span class="n">session_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sessions</span><span class="p">[</span><span class="n">session_name</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">sessions</span><span class="p">[</span><span class="n">session_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">run_name</span><span class="p">:</span> <span class="n">raw</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sessions</span><span class="p">[</span><span class="n">session_name</span><span class="p">][</span><span class="n">run_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw</span>
        <span class="k">return</span> <span class="n">sessions</span>

    <span class="k">def</span> <span class="nf">data_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">subject</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_list</span><span class="p">:</span>
            <span class="k">raise</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid subject number&quot;</span><span class="p">))</span>

        <span class="n">sub</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{:02d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">sign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">key_dest</span> <span class="o">=</span> <span class="s2">&quot;MNE-</span><span class="si">{:s}</span><span class="s2">-data&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sign</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_dataset_path</span><span class="p">(</span><span class="n">sign</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">key_dest</span><span class="p">)</span>

        <span class="n">filelist</span> <span class="o">=</span> <span class="n">fs_get_file_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figshare_id</span><span class="p">)</span>
        <span class="n">reg</span> <span class="o">=</span> <span class="n">fs_get_file_hash</span><span class="p">(</span><span class="n">filelist</span><span class="p">)</span>
        <span class="n">fsn</span> <span class="o">=</span> <span class="n">fs_get_file_id</span><span class="p">(</span><span class="n">filelist</span><span class="p">)</span>
        <span class="n">gb</span> <span class="o">=</span> <span class="n">pooch</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="n">MAMEM_URL</span><span class="p">,</span> <span class="n">registry</span><span class="o">=</span><span class="n">reg</span><span class="p">)</span>

        <span class="n">spath</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fsn</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="n">sub</span><span class="p">:</span>
                <span class="n">spath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gb</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">fsn</span><span class="p">[</span><span class="n">f</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">spath</span>


<div class="viewcode-block" id="MAMEM1"><a class="viewcode-back" href="../../../generated/moabb.datasets.MAMEM1.html#moabb.datasets.MAMEM1">[docs]</a><span class="k">class</span> <span class="nc">MAMEM1</span><span class="p">(</span><span class="n">BaseMAMEM</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;SSVEP MAMEM 1 dataset</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    EEG signals with 256 channels captured from 11 subjects executing a</span>
<span class="sd">    SSVEP-based experimental protocol. Five different frequencies</span>
<span class="sd">    (6.66, 7.50, 8.57, 10.00 and 12.00 Hz) have been used for the visual</span>
<span class="sd">    stimulation,and the EGI 300 Geodesic EEG System (GES 300), using a</span>
<span class="sd">    stimulation, HydroCel Geodesic Sensor Net (HCGSN) and a sampling rate of</span>
<span class="sd">    250 Hz has been used for capturing the signals.</span>

<span class="sd">    Check the technical report [2]_ for more detail.</span>
<span class="sd">    From [1]_, subjects were exposed to non-overlapping flickering lights from five</span>
<span class="sd">    magenta boxes with frequencies [6.66Hz, 7.5Hz, 8.57Hz 10Hz and 12Hz].</span>
<span class="sd">    256 channel EEG recordings were captured.</span>

<span class="sd">    Each session of the experimental procedure consisted of the following:</span>

<span class="sd">    1. 100 seconds of rest.</span>
<span class="sd">    2. An adaptation period in which the subject is exposed to eight</span>
<span class="sd">       5 second windows of flickering from a magenta box. Each flickering</span>
<span class="sd">       window is of a single isolated frequency, randomly chosen from the</span>
<span class="sd">       above set, specified in the FREQUENCIES1.txt file under</span>
<span class="sd">       &#39;adaptation&#39;. The individual flickering windows are separated by 5</span>
<span class="sd">       seconds of rest.</span>
<span class="sd">    3. 30 seconds of rest.</span>
<span class="sd">    4. For each of the frequencies from the above set in ascending order,</span>
<span class="sd">       also specified in FREQUENCIES1.txt under &#39;main trials&#39;:</span>

<span class="sd">       1. Three 5 second windows of flickering at the chosen frequency,</span>
<span class="sd">           separated by 5 seconds of rest.</span>
<span class="sd">       2. 30 seconds of rest.</span>

<span class="sd">    This gives a total of 15 flickering windows, or 23 including the</span>
<span class="sd">    adaptation period.</span>

<span class="sd">    The order of chosen frequencies is the same for each session, although</span>
<span class="sd">    there are small-moderate variations in the actual frequencies of each</span>
<span class="sd">    individual window. The .freq annotations list the different frequencies at</span>
<span class="sd">    a higher level of precision.</span>

<span class="sd">    **Note**: Each &#39;session&#39; in experiment 1 includes an adaptation period, unlike</span>
<span class="sd">    experiment 2 and 3 where each subject undergoes only one adaptation period</span>
<span class="sd">    before their first &#39;session&#39;.</span>

<span class="sd">    From [3]_:</span>

<span class="sd">    **Eligible signals**: The EEG signal is sensitive to external factors that have</span>
<span class="sd">    to do with the environment or the configuration of the acquisition setup</span>
<span class="sd">    The research stuff was responsible for the elimination of trials that were</span>
<span class="sd">    considered faulty. As a result the following sessions were noted and</span>
<span class="sd">    excluded from further analysis:</span>
<span class="sd">    1. S003, during session 4 the stimulation program crashed</span>
<span class="sd">    2. S004, during session 2 the stimulation program crashed, and</span>
<span class="sd">    3. S008, during session 4 the Stim Tracker was detuned.</span>
<span class="sd">    Furthermore, we must also note that subject S001 participated in 3 sessions</span>
<span class="sd">    and subjects S003 and S004 participated in 4 sessions, compared to all</span>
<span class="sd">    other subjects that participated in 5 sessions (NB: in fact, there is only</span>
<span class="sd">    3 sessions for subjects 1, 3 and 8, and 4 sessions for subject 4 available</span>
<span class="sd">    to download). As a result, the utilized dataset consists of 1104 trials of</span>
<span class="sd">    5 seconds each.</span>

<span class="sd">    **Flickering frequencies**: Usually the refresh rate for an LCD Screen is 60 Hz</span>
<span class="sd">    creating a restriction to the number of frequencies that can be selected.</span>
<span class="sd">    Specifically, only the frequencies that when divided with the refresh rate</span>
<span class="sd">    of the screen result in an integer quotient could be selected. As a result,</span>
<span class="sd">    the frequendies that could be obtained were the following: 30.00. 20.00,</span>
<span class="sd">    15.00, 1200, 10.00, 857. 7.50 and 6.66 Hz. In addition, it is also</span>
<span class="sd">    important to avoid using frequencies that are multiples of another</span>
<span class="sd">    frequency, for example making the choice to use 10.00Hz prohibits the use</span>
<span class="sd">    of 20.00 and 30.00 Mhz. With the previously described limitations in mind,</span>
<span class="sd">    the selected frequencies for the experiment were: 12.00, 10.00, 8.57, 7.50</span>
<span class="sd">    and 6.66 Hz.</span>

<span class="sd">    **Stimuli Layout**: In an effort to keep the experimental process as simple as</span>
<span class="sd">    possible, we used only one flickering box instead of more common choices,</span>
<span class="sd">    such as 4 or 5 boxes flickering simultaneously The fact that the subject</span>
<span class="sd">    could focus on one stimulus without having the distraction of other</span>
<span class="sd">    flickering sources allowed us to minimize the noise of our signals and</span>
<span class="sd">    verify the appropriateness of our acquisition setup Nevertheless, having</span>
<span class="sd">    concluded the optimal configuration for analyzing the EEG signals, the</span>
<span class="sd">    experiment will be repeated with more concurrent visual stimulus.</span>

<span class="sd">    **Trial duration**: The duration of each trial was set to 5 seconds, as this</span>
<span class="sd">    time was considered adequate to allow the occipital part of the bran to</span>
<span class="sd">    mimic the stimulation frequency and still be small enough for making a</span>
<span class="sd">    selection in the context</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] MAMEM Steady State Visually Evoked Potential EEG Database</span>
<span class="sd">           `&lt;https://archive.physionet.org/physiobank/database/mssvepdb/&gt;`_</span>
<span class="sd">    .. [2] V.P. Oikonomou et al, 2016, Comparative evaluation of state-of-the-art</span>
<span class="sd">           algorithms for SSVEP-based BCIs. arXiv.</span>
<span class="sd">           `&lt;http://arxiv.org/abs/1602.00904&gt;`-</span>
<span class="sd">    .. [3] S. Nikolopoulos, 2016, DataAcquisitionDetails.pdf</span>
<span class="sd">           `&lt;https://figshare.com/articles/dataset/MAMEM_EEG_SSVEP_Dataset_I_256_channels_11_subjects_5_frequencies_/2068677?file=3793738&gt;`_  # noqa: E501</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;6.66&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;7.50&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;8.57&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;10.00&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;12.00&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="c1"># 3 for S001, S003, S008, 4 for S004</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;SSVEP MAMEM1&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;https://arxiv.org/abs/1602.00904&quot;</span><span class="p">,</span>
            <span class="n">figshare_id</span><span class="o">=</span><span class="mi">2068677</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="MAMEM2"><a class="viewcode-back" href="../../../generated/moabb.datasets.MAMEM2.html#moabb.datasets.MAMEM2">[docs]</a><span class="k">class</span> <span class="nc">MAMEM2</span><span class="p">(</span><span class="n">BaseMAMEM</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;SSVEP MAMEM 2 dataset</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    EEG signals with 256 channels captured from 11 subjects executing a</span>
<span class="sd">    SSVEP-based experimental protocol. Five different frequencies</span>
<span class="sd">    (6.66, 7.50, 8.57, 10.00 and 12.00 Hz) have been used for the visual</span>
<span class="sd">    stimulation,and the EGI 300 Geodesic EEG System (GES 300), using a</span>
<span class="sd">    stimulation, HydroCel Geodesic Sensor Net (HCGSN) and a sampling rate of</span>
<span class="sd">    250 Hz has been used for capturing the signals.</span>

<span class="sd">    Subjects were exposed to flickering lights from five violet boxes with</span>
<span class="sd">    frequencies [6.66Hz, 7.5Hz, 8.57Hz, 10Hz, and 12Hz] simultaneously. Prior</span>
<span class="sd">    to and during each flicking window, one of the boxes is marked by a yellow</span>
<span class="sd">    arrow indicating the box to be focused on by the subject. 256 channel EEG</span>
<span class="sd">    recordings were captured.</span>

<span class="sd">    From [2]_, each subject underwent a single adaptation period before the first of</span>
<span class="sd">    their 5 sessions (unlike experiment 1 in which each session began with its own</span>
<span class="sd">    adaptation period). In the adaptation period, the subject is exposed to ten</span>
<span class="sd">    5-second flickering windows from the five boxes simultaneously, with the</span>
<span class="sd">    target frequencies specified in the FREQUENCIES2.txt file under</span>
<span class="sd">    &#39;adaptation&#39;. The flickering windows are separated by 5 seconds of rest,</span>
<span class="sd">    and the 100s adaptation period precedes the first session by 30 seconds.</span>

<span class="sd">    Each session consisted of the following:</span>
<span class="sd">    For the series of frequencies specified in the FREQUENCIES2.txt file under</span>
<span class="sd">    &#39;sessions&#39;:</span>
<span class="sd">    A 5 second window with all boxes flickering and the subject focusing</span>
<span class="sd">    on the specified frequency&#39;s marked box, followed by 5 seconds of rest.</span>
<span class="sd">    This gives a total of 25 flickering windows for each session (not</span>
<span class="sd">    including the first adaptation period). Five minutes of rest before</span>
<span class="sd">    the next session (not including the 5th session).</span>

<span class="sd">    The order of chosen frequencies is the same for each session, although</span>
<span class="sd">    there are small-moderate variations in the actual frequencies of each</span>
<span class="sd">    individual window.</span>
<span class="sd">    **Note**: Each &#39;session&#39; in experiment 1 includes an adaptation period,</span>
<span class="sd">    unlike experiment 2 and 3 where each subject undergoes only one adaptation</span>
<span class="sd">    period before their first &#39;session&#39;.</span>

<span class="sd">    **Waveforms and Annotations**</span>
<span class="sd">    File names are in the form T0NNn, where NN is the subject number and n is</span>
<span class="sd">    a - e for the session letter or x for the adaptation period. Each session</span>
<span class="sd">    lasts in the order of several minutes and is sampled at 250Hz. Each session</span>
<span class="sd">    and adaptation period has the following files:</span>
<span class="sd">    A waveform file of the EEG signals (.dat) along with its header file</span>
<span class="sd">    (.hea). If the channel corresponds to an international 10-20 channel then</span>
<span class="sd">    it is labeled as such. Otherwise, it is just labeled &#39;EEG&#39;. An annotation</span>
<span class="sd">    file (.flash) containing the locations of each individual flash. An</span>
<span class="sd">    annotation file (.win) containing the locations of the beginning and end</span>
<span class="sd">    of each 5 second flickering window. The annotations are labeled as &#39;(&#39; for</span>
<span class="sd">    start and &#39;)&#39; for stop, along with auxiliary strings indicating the focal</span>
<span class="sd">    frequency of the flashing windows.</span>

<span class="sd">    The FREQUENCIES2.txt file indicates the approximate marked frequencies of</span>
<span class="sd">    the flickering windows, equal for each session, adaptation, and subject.</span>
<span class="sd">    These values are equal to those contained in the .win annotations.</span>

<span class="sd">    **Observed  artifacts:**</span>
<span class="sd">    During the  stimulus  presentation  to  subject  S007  the  research stuff</span>
<span class="sd">    noted that the subject had a tendency to eye blink. As a result the</span>
<span class="sd">    interference, in matters of artifacts, on the recorded signal is expected</span>
<span class="sd">    to be high.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] MAMEM Steady State Visually Evoked Potential EEG Database</span>
<span class="sd">           `&lt;https://archive.physionet.org/physiobank/database/mssvepdb/&gt;`_</span>
<span class="sd">    .. [2] S. Nikolopoulos, 2016, DataAcquisitionDetails.pdf</span>
<span class="sd">           `&lt;https://figshare.com/articles/dataset/MAMEM_EEG_SSVEP_Dataset_II_256_channels_11_subjects_5_frequencies_presented_simultaneously_/3153409?file=4911931&gt;`_  # noqa: E501</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;6.66&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;7.50&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;8.57&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;10.00&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;12.00&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;SSVEP MAMEM2&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;https://arxiv.org/abs/1602.00904&quot;</span><span class="p">,</span>
            <span class="n">figshare_id</span><span class="o">=</span><span class="mi">3153409</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="MAMEM3"><a class="viewcode-back" href="../../../generated/moabb.datasets.MAMEM3.html#moabb.datasets.MAMEM3">[docs]</a><span class="k">class</span> <span class="nc">MAMEM3</span><span class="p">(</span><span class="n">BaseMAMEM</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;SSVEP MAMEM 3 dataset</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    EEG signals with 14 channels captured from 11 subjects executing a</span>
<span class="sd">    SSVEP-based experimental protocol. Five different frequencies</span>
<span class="sd">    (6.66, 7.50, 8.57, 10.00 and 12.00 Hz) have been used for the visual</span>
<span class="sd">    stimulation, and the Emotiv EPOC, using 14 wireless channels has been used</span>
<span class="sd">    for capturing the signals.</span>

<span class="sd">    Subjects were exposed to flickering lights from five magenta boxes with</span>
<span class="sd">    frequencies [6.66Hz, 7.5Hz, 8.57Hz, 10Hz and 12Hz] simultaneously. Prior</span>
<span class="sd">    to and during each flicking window, one of the boxes is marked by a yellow</span>
<span class="sd">    arrow indicating the box to be focused on by the subject. The Emotiv EPOC</span>
<span class="sd">    14 channel wireless EEG headset was used to capture the subjects&#39; signals.</span>

<span class="sd">    Each subject underwent a single adaptation period before the first of their</span>
<span class="sd">    5 sessions (unlike experiment 1 in which each session began with its own</span>
<span class="sd">    adaptation period). In the adaptation period, the subject is exposed to ten</span>
<span class="sd">    5-second flickering windows from the five boxes simultaneously, with the</span>
<span class="sd">    target frequencies specified in the FREQUENCIES3.txt file under</span>
<span class="sd">    &#39;adaptation&#39;. The flickering windows are separated by 5 seconds of rest,</span>
<span class="sd">    and the 100s adaptation period precedes the first session by 30 seconds.</span>

<span class="sd">    Each session consisted of the following:</span>
<span class="sd">    For the series of frequencies specified in the FREQUENCIES3.txt file under</span>
<span class="sd">    &#39;sessions&#39;:</span>
<span class="sd">    A 5 second window with all boxes flickering and the subject focusing on</span>
<span class="sd">    the specified frequency&#39;s marked box, followed by 5 seconds of rest.</span>
<span class="sd">    Between the 12th and 13th flickering window, there is a 30s resting</span>
<span class="sd">    period. This gives a total of 25 flickering windows for each session</span>
<span class="sd">    (not including the first adaptation period). Five minutes of rest</span>
<span class="sd">    before the next session (not including the 5th session).</span>

<span class="sd">    The order of chosen frequencies is the same for each session, although</span>
<span class="sd">    there are small-moderate variations in the actual frequencies of each</span>
<span class="sd">    individual window.</span>

<span class="sd">    **Note**: Each &#39;session&#39; in experiment 1 includes an adaptation period, unlike</span>
<span class="sd">    experiment 2 and 3 where each subject undergoes only one adaptation period</span>
<span class="sd">    before their first &#39;session&#39; [2]_.</span>

<span class="sd">    **Waveforms and Annotations**</span>
<span class="sd">    File names are in the form U0NNn, where NN is the subject number and n is</span>
<span class="sd">    a - e for the session letter or x for the adaptation period. In addition,</span>
<span class="sd">    session file names end with either i or ii, corresponding to the first 12</span>
<span class="sd">    or second 13 windows of the session respectively. Each session lasts in the</span>
<span class="sd">    order of several minutes and is sampled at 128Hz.</span>
<span class="sd">    Each session half and adaptation period has the following files:</span>
<span class="sd">    A waveform file of the EEG signals (.dat) along with its header file</span>
<span class="sd">    (.hea). An annotation file (.win) containing the locations of the beginning</span>
<span class="sd">    and end of each 5 second flickering window. The annotations are labeled as</span>
<span class="sd">    &#39;(&#39; for start and &#39;)&#39; for stop, along with auxiliary strings indicating the</span>
<span class="sd">    focal frequency of the flashing windows.</span>

<span class="sd">    The FREQUENCIES3.txt file indicates the approximate marked frequencies of</span>
<span class="sd">    the flickering windows, equal for each session, adaptation, and subject.</span>
<span class="sd">    These values are equal to those contained in the .win annotations.</span>

<span class="sd">    **Trial  manipulation**:</span>
<span class="sd">    The  trial  initiation  is  defined by  an  event  code  (32779)  and  the</span>
<span class="sd">    end by another (32780). There are five different labels that indicate the</span>
<span class="sd">    box subjects were instructed to focus  on  (1, 2, 3, 4 and 5) and</span>
<span class="sd">    correspond to frequencies 12.00, 10.00, 8.57, 7.50 and 6.66 Hz respectively.</span>
<span class="sd">    5 3 2 1 4 5 2 1 4 3 is the trial sequence for the adaptation and</span>
<span class="sd">    4 2 3 5 1 2 5 4 2 3 1 5 4 3 2 4 1 2 5 3 4 1 3 1 3 is the sequence for each</span>
<span class="sd">    session.</span>

<span class="sd">    **Observed  artifacts**:</span>
<span class="sd">    During  the  stimulus  presentation to  subject  S007  the  research staff</span>
<span class="sd">    noted that the subject had a tendency to eye blink. As a result the</span>
<span class="sd">    interference, in matters of artifacts, on the recorded signal is expected</span>
<span class="sd">    to be high.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] MAMEM Steady State Visually Evoked Potential EEG Database</span>
<span class="sd">           `&lt;https://archive.physionet.org/physiobank/database/mssvepdb/&gt;`_</span>
<span class="sd">    .. [2] S. Nikolopoulos, 2016, DataAcquisitionDetails.pdf</span>
<span class="sd">           `&lt;https://figshare.com/articles/dataset/MAMEM_EEG_SSVEP_Dataset_III_14_channels_11_subjects_5_frequencies_presented_simultaneously_/3413851&gt;`_  # noqa: E501</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;6.66&quot;</span><span class="p">:</span> <span class="mi">33029</span><span class="p">,</span>
                <span class="s2">&quot;7.50&quot;</span><span class="p">:</span> <span class="mi">33028</span><span class="p">,</span>
                <span class="s2">&quot;8.57&quot;</span><span class="p">:</span> <span class="mi">33027</span><span class="p">,</span>
                <span class="s2">&quot;10.00&quot;</span><span class="p">:</span> <span class="mi">33026</span><span class="p">,</span>
                <span class="s2">&quot;12.00&quot;</span><span class="p">:</span> <span class="mi">33025</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;SSVEP MAMEM3&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;https://arxiv.org/abs/1602.00904&quot;</span><span class="p">,</span>
            <span class="n">figshare_id</span><span class="o">=</span><span class="mi">3413851</span><span class="p">,</span>
        <span class="p">)</span></div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright 2018-2021, Alexandre Barachant, Sylvain Chevallier.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>