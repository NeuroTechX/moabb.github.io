<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>moabb.datasets.bnci &#8212; moabb 0.4.3 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-rendered-html.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          moabb</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.3</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../whats_new.html">What's new</a></li>
                <li><a href="../../../api.html">API</a></li>
                <li><a href="../../../auto_examples/index.html">Gallery</a></li>
                <li><a href="../../../auto_tutorials/index.html">Tutorials</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../whats_new.html">Whatâ€™s new</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#develop-branch">Develop branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-3-stable-pypi">Version - 0.4.3 (Stable - PyPi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-2">Version - 0.4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-1">Version - 0.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-4-0">Version - 0.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-3-0">Version 0.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-2-1">Version 0.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../whats_new.html#version-0-2-0">Version 0.2.0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Main classes of MOABB:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../datasets.html">Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#motor-imagery-datasets">Motor Imagery Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#erp-datasets">ERP Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#ssvep-datasets">SSVEP Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../datasets.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../evaluations.html">Evaluations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../evaluations.html#id1">Evaluations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../evaluations.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../paradigms.html">Paradigms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#motor-imagery-paradigms">Motor Imagery Paradigms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#p300-paradigms">P300 Paradigms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#ssvep-paradigms">SSVEP Paradigms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../paradigms.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../pipelines.html">Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pipelines.html#id1">Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pipelines.html#base-utils">Base &amp; Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../analysis.html">Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../analysis.html#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analysis.html#statistics">Statistics</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <h1>Source code for moabb.datasets.bnci</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">BNCI 2014-001 Motor imagery dataset.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mne</span> <span class="kn">import</span> <span class="n">create_info</span>
<span class="kn">from</span> <span class="nn">mne.channels</span> <span class="kn">import</span> <span class="n">make_standard_montage</span>
<span class="kn">from</span> <span class="nn">mne.io</span> <span class="kn">import</span> <span class="n">RawArray</span>
<span class="kn">from</span> <span class="nn">mne.utils</span> <span class="kn">import</span> <span class="n">verbose</span>
<span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">loadmat</span>

<span class="kn">from</span> <span class="nn">moabb.datasets</span> <span class="kn">import</span> <span class="n">download</span> <span class="k">as</span> <span class="n">dl</span>
<span class="kn">from</span> <span class="nn">moabb.datasets.base</span> <span class="kn">import</span> <span class="n">BaseDataset</span>


<span class="n">BNCI_URL</span> <span class="o">=</span> <span class="s2">&quot;http://bnci-horizon-2020.eu/database/data-sets/&quot;</span>
<span class="n">BBCI_URL</span> <span class="o">=</span> <span class="s2">&quot;http://doc.ml.tu-berlin.de/bbci/&quot;</span>


<span class="k">def</span> <span class="nf">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">dl</span><span class="o">.</span><span class="n">data_dl</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;BNCI&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)]</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">dataset</span><span class="o">=</span><span class="s2">&quot;001-2014&quot;</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>  <span class="c1"># noqa: D301</span>
    <span class="sd">&quot;&quot;&quot;Get paths to local copies of a BNCI dataset files.</span>

<span class="sd">    This will fetch data for a given BNCI dataset. Report to the bnci website</span>
<span class="sd">    for a complete description of the experimental setup of each dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    subject : int</span>
<span class="sd">        The subject to load.</span>
<span class="sd">    dataset : string</span>
<span class="sd">        The bnci dataset name.</span>
<span class="sd">    path : None | str</span>
<span class="sd">        Location of where to look for the BNCI data storing location.</span>
<span class="sd">        If None, the environment variable or config parameter</span>
<span class="sd">        ``MNE_DATASETS_BNCI_PATH`` is used. If it doesn&#39;t exist, the</span>
<span class="sd">        &quot;~/mne_data&quot; directory is used. If the BNCI dataset</span>
<span class="sd">        is not found under the given path, the data</span>
<span class="sd">        will be automatically downloaded to the specified folder.</span>
<span class="sd">    force_update : bool</span>
<span class="sd">        Force update of the dataset even if a local copy exists.</span>
<span class="sd">    update_path : bool | None</span>
<span class="sd">        If True, set the MNE_DATASETS_BNCI_PATH in mne-python</span>
<span class="sd">        config to the given path. If None, the user is prompted.</span>
<span class="sd">    verbose : bool, str, int, or None</span>
<span class="sd">        If not None, override default verbose level (see :func:`mne.verbose`</span>
<span class="sd">        and :ref:`Logging documentation &lt;tut_logging&gt;` for more).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    raws : list</span>
<span class="sd">        List of raw instances for each non consecutive recording. Depending</span>
<span class="sd">        on the dataset it could be a BCI run or a different recording session.</span>
<span class="sd">    event_id: dict</span>
<span class="sd">        dictonary containing events and their code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dataset_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;001-2014&quot;</span><span class="p">:</span> <span class="n">_load_data_001_2014</span><span class="p">,</span>
        <span class="s2">&quot;002-2014&quot;</span><span class="p">:</span> <span class="n">_load_data_002_2014</span><span class="p">,</span>
        <span class="s2">&quot;004-2014&quot;</span><span class="p">:</span> <span class="n">_load_data_004_2014</span><span class="p">,</span>
        <span class="s2">&quot;008-2014&quot;</span><span class="p">:</span> <span class="n">_load_data_008_2014</span><span class="p">,</span>
        <span class="s2">&quot;009-2014&quot;</span><span class="p">:</span> <span class="n">_load_data_009_2014</span><span class="p">,</span>
        <span class="s2">&quot;001-2015&quot;</span><span class="p">:</span> <span class="n">_load_data_001_2015</span><span class="p">,</span>
        <span class="s2">&quot;003-2015&quot;</span><span class="p">:</span> <span class="n">_load_data_003_2015</span><span class="p">,</span>
        <span class="s2">&quot;004-2015&quot;</span><span class="p">:</span> <span class="n">_load_data_004_2015</span><span class="p">,</span>
        <span class="s2">&quot;009-2015&quot;</span><span class="p">:</span> <span class="n">_load_data_009_2015</span><span class="p">,</span>
        <span class="s2">&quot;010-2015&quot;</span><span class="p">:</span> <span class="n">_load_data_010_2015</span><span class="p">,</span>
        <span class="s2">&quot;012-2015&quot;</span><span class="p">:</span> <span class="n">_load_data_012_2015</span><span class="p">,</span>
        <span class="s2">&quot;013-2015&quot;</span><span class="p">:</span> <span class="n">_load_data_013_2015</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">baseurl_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;001-2014&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;002-2014&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;001-2015&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;004-2014&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;008-2014&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;009-2014&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;003-2015&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;004-2015&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;009-2015&quot;</span><span class="p">:</span> <span class="n">BBCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;010-2015&quot;</span><span class="p">:</span> <span class="n">BBCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;012-2015&quot;</span><span class="p">:</span> <span class="n">BBCI_URL</span><span class="p">,</span>
        <span class="s2">&quot;013-2015&quot;</span><span class="p">:</span> <span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">dataset</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset_list</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Dataset &#39;</span><span class="si">%s</span><span class="s2">&#39; is not a valid BNCI dataset ID. &quot;</span>
            <span class="s2">&quot;Valid dataset are </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dataset_list</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">dataset_list</span><span class="p">[</span><span class="n">dataset</span><span class="p">](</span>
        <span class="n">subject</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">,</span> <span class="n">baseurl_list</span><span class="p">[</span><span class="n">dataset</span><span class="p">],</span> <span class="n">verbose</span>
    <span class="p">)</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_001_2014</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 001-2014 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 9. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="c1"># fmt: off</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;Fz&quot;</span><span class="p">,</span> <span class="s2">&quot;FC3&quot;</span><span class="p">,</span> <span class="s2">&quot;FC1&quot;</span><span class="p">,</span> <span class="s2">&quot;FCz&quot;</span><span class="p">,</span> <span class="s2">&quot;FC2&quot;</span><span class="p">,</span> <span class="s2">&quot;FC4&quot;</span><span class="p">,</span> <span class="s2">&quot;C5&quot;</span><span class="p">,</span> <span class="s2">&quot;C3&quot;</span><span class="p">,</span> <span class="s2">&quot;C1&quot;</span><span class="p">,</span> <span class="s2">&quot;Cz&quot;</span><span class="p">,</span> <span class="s2">&quot;C2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;C6&quot;</span><span class="p">,</span> <span class="s2">&quot;CP3&quot;</span><span class="p">,</span> <span class="s2">&quot;CP1&quot;</span><span class="p">,</span> <span class="s2">&quot;CPz&quot;</span><span class="p">,</span> <span class="s2">&quot;CP2&quot;</span><span class="p">,</span> <span class="s2">&quot;CP4&quot;</span><span class="p">,</span> <span class="s2">&quot;P1&quot;</span><span class="p">,</span> <span class="s2">&quot;Pz&quot;</span><span class="p">,</span> <span class="s2">&quot;P2&quot;</span><span class="p">,</span> <span class="s2">&quot;POz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;EOG1&quot;</span><span class="p">,</span> <span class="s2">&quot;EOG2&quot;</span><span class="p">,</span> <span class="s2">&quot;EOG3&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="c1"># fmt: on</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">22</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;eog&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>

    <span class="n">sessions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">001-2014/A</span><span class="si">{s:02d}{r}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)</span>
        <span class="n">runs</span><span class="p">,</span> <span class="n">ev</span> <span class="o">=</span> <span class="n">_convert_mi</span><span class="p">(</span><span class="n">filename</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">)</span>
        <span class="c1"># FIXME: deal with run with no event (1:3) and name them</span>
        <span class="n">sessions</span><span class="p">[</span><span class="s2">&quot;session_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;run_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="n">run</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">runs</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">sessions</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_002_2014</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 002-2014 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">14</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 14. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="n">runs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">002-2014/S</span><span class="si">{s:02d}{r}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># FIXME: electrode position and name are not provided directly.</span>
        <span class="n">raws</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">_convert_mi</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">15</span><span class="p">)</span>
        <span class="n">runs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">raws</span><span class="p">)</span>

    <span class="n">runs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;run_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="n">run</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">runs</span><span class="p">)}</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;session_0&quot;</span><span class="p">:</span> <span class="n">runs</span><span class="p">}</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_004_2014</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 004-2014 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 9. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;C3&quot;</span><span class="p">,</span> <span class="s2">&quot;Cz&quot;</span><span class="p">,</span> <span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;EOG1&quot;</span><span class="p">,</span> <span class="s2">&quot;EOG2&quot;</span><span class="p">,</span> <span class="s2">&quot;EOG3&quot;</span><span class="p">]</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;eog&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>

    <span class="n">sessions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">004-2014/B</span><span class="si">{s:02d}{r}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">raws</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">_convert_mi</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">)</span>
        <span class="n">sessions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">raws</span><span class="p">)</span>

    <span class="n">sessions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;session_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;run_0&quot;</span><span class="p">:</span> <span class="n">run</span><span class="p">}</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sessions</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">sessions</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_008_2014</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 008-2014 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 8. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">008-2014/A</span><span class="si">{s:02d}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">run</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">squeeze_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
    <span class="n">raw</span><span class="p">,</span> <span class="n">event_id</span> <span class="o">=</span> <span class="n">_convert_run_p300_sl</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>

    <span class="n">sessions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;session_0&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;run_0&quot;</span><span class="p">:</span> <span class="n">raw</span><span class="p">}}</span>

    <span class="k">return</span> <span class="n">sessions</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_009_2014</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 009-2014 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 10. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="c1"># FIXME there is two type of speller, grid speller and geo-speller.</span>
    <span class="c1"># we load only grid speller data</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">009-2014/A</span><span class="si">{s:02d}</span><span class="s2">S.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">squeeze_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
    <span class="n">sess</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">raw</span><span class="p">,</span> <span class="n">ev</span> <span class="o">=</span> <span class="n">_convert_run_p300_sl</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="n">sess</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
        <span class="n">event_id</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>

    <span class="n">sessions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sessi</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sess</span><span class="p">):</span>
        <span class="n">sessions</span><span class="p">[</span><span class="s2">&quot;session_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;run_0&quot;</span><span class="p">:</span> <span class="n">sessi</span><span class="p">}</span>

    <span class="k">return</span> <span class="n">sessions</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_001_2015</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 001-2015 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 12. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">subject</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]:</span>
        <span class="n">ses</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]</span>  <span class="c1"># 3 sessions for those subjects</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ses</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">]</span>

    <span class="c1"># fmt: off</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;FC3&quot;</span><span class="p">,</span> <span class="s2">&quot;FCz&quot;</span><span class="p">,</span> <span class="s2">&quot;FC4&quot;</span><span class="p">,</span> <span class="s2">&quot;C5&quot;</span><span class="p">,</span> <span class="s2">&quot;C3&quot;</span><span class="p">,</span> <span class="s2">&quot;C1&quot;</span><span class="p">,</span> <span class="s2">&quot;Cz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;C2&quot;</span><span class="p">,</span> <span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;C6&quot;</span><span class="p">,</span> <span class="s2">&quot;CP3&quot;</span><span class="p">,</span> <span class="s2">&quot;CPz&quot;</span><span class="p">,</span> <span class="s2">&quot;CP4&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="c1"># fmt: on</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">13</span>

    <span class="n">sessions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ses</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">001-2015/S</span><span class="si">{s:02d}{r}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)</span>
        <span class="n">runs</span><span class="p">,</span> <span class="n">ev</span> <span class="o">=</span> <span class="n">_convert_mi</span><span class="p">(</span><span class="n">filename</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">)</span>
        <span class="n">sessions</span><span class="p">[</span><span class="s2">&quot;session_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;run_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="n">run</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">runs</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">sessions</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_003_2015</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 003-2015 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 12. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">003-2015/s</span><span class="si">{s:d}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">squeeze_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;s</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">]</span>
    <span class="n">sfreq</span> <span class="o">=</span> <span class="mf">256.0</span>

    <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Fz&quot;</span><span class="p">,</span> <span class="s2">&quot;Cz&quot;</span><span class="p">,</span> <span class="s2">&quot;P3&quot;</span><span class="p">,</span> <span class="s2">&quot;Pz&quot;</span><span class="p">,</span> <span class="s2">&quot;P4&quot;</span><span class="p">,</span> <span class="s2">&quot;PO7&quot;</span><span class="p">,</span> <span class="s2">&quot;Oz&quot;</span><span class="p">,</span> <span class="s2">&quot;PO8&quot;</span><span class="p">,</span> <span class="s2">&quot;Target&quot;</span><span class="p">,</span> <span class="s2">&quot;Flash&quot;</span><span class="p">]</span>

    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="n">montage</span> <span class="o">=</span> <span class="n">make_standard_montage</span><span class="p">(</span><span class="s2">&quot;standard_1005&quot;</span><span class="p">)</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">create_info</span><span class="p">(</span><span class="n">ch_names</span><span class="o">=</span><span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="o">=</span><span class="n">ch_types</span><span class="p">,</span> <span class="n">sfreq</span><span class="o">=</span><span class="n">sfreq</span><span class="p">)</span>

    <span class="n">sessions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">sessions</span><span class="p">[</span><span class="s2">&quot;session_0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">ri</span><span class="p">,</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">data</span><span class="o">.</span><span class="n">train</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">test</span><span class="p">]):</span>
        <span class="c1"># flash events on the channel 9</span>
        <span class="n">flashs</span> <span class="o">=</span> <span class="n">run</span><span class="p">[</span><span class="mi">9</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">ix_flash</span> <span class="o">=</span> <span class="n">flashs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="n">flashs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">ix_flash</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span>  <span class="c1"># add 2 to avoid overlapp on event id</span>
        <span class="n">flash_code</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">flashs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">ix_flash</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">flash_code</span><span class="p">)</span> <span class="o">==</span> <span class="mi">36</span><span class="p">:</span>
            <span class="c1"># char mode</span>
            <span class="n">evd</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Char</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">37</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># row / column mode</span>
            <span class="n">evd</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Col</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)}</span>
            <span class="n">evd</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;Row</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)})</span>

        <span class="c1"># target events are on channel 10</span>
        <span class="n">targets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">flashs</span><span class="p">)</span>
        <span class="n">targets</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">ix_flash</span><span class="p">]</span> <span class="o">=</span> <span class="n">run</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="n">ix_flash</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">eeg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">run</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">,</span> <span class="n">targets</span><span class="p">,</span> <span class="n">flashs</span><span class="p">]</span>
        <span class="n">raw</span> <span class="o">=</span> <span class="n">RawArray</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">eeg_data</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span><span class="p">(</span><span class="n">montage</span><span class="p">)</span>
        <span class="n">sessions</span><span class="p">[</span><span class="s2">&quot;session_0&quot;</span><span class="p">][</span><span class="s2">&quot;run_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ri</span><span class="p">)]</span> <span class="o">=</span> <span class="n">raw</span>

    <span class="k">return</span> <span class="n">sessions</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_004_2015</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 004-2015 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 9. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="s2">&quot;J&quot;</span><span class="p">,</span> <span class="s2">&quot;L&quot;</span><span class="p">]</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">004-2015/</span><span class="si">{s}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subjects</span><span class="p">[</span><span class="n">subject</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># fmt: off</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;AFz&quot;</span><span class="p">,</span> <span class="s2">&quot;F7&quot;</span><span class="p">,</span> <span class="s2">&quot;F3&quot;</span><span class="p">,</span> <span class="s2">&quot;Fz&quot;</span><span class="p">,</span> <span class="s2">&quot;F4&quot;</span><span class="p">,</span> <span class="s2">&quot;F8&quot;</span><span class="p">,</span> <span class="s2">&quot;FC3&quot;</span><span class="p">,</span> <span class="s2">&quot;FCz&quot;</span><span class="p">,</span> <span class="s2">&quot;FC4&quot;</span><span class="p">,</span> <span class="s2">&quot;T3&quot;</span><span class="p">,</span> <span class="s2">&quot;C3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Cz&quot;</span><span class="p">,</span> <span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;T4&quot;</span><span class="p">,</span> <span class="s2">&quot;CP3&quot;</span><span class="p">,</span> <span class="s2">&quot;CPz&quot;</span><span class="p">,</span> <span class="s2">&quot;CP4&quot;</span><span class="p">,</span> <span class="s2">&quot;P7&quot;</span><span class="p">,</span> <span class="s2">&quot;P5&quot;</span><span class="p">,</span> <span class="s2">&quot;P3&quot;</span><span class="p">,</span> <span class="s2">&quot;P1&quot;</span><span class="p">,</span> <span class="s2">&quot;Pz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;P2&quot;</span><span class="p">,</span> <span class="s2">&quot;P4&quot;</span><span class="p">,</span> <span class="s2">&quot;P6&quot;</span><span class="p">,</span> <span class="s2">&quot;P8&quot;</span><span class="p">,</span> <span class="s2">&quot;PO3&quot;</span><span class="p">,</span> <span class="s2">&quot;PO4&quot;</span><span class="p">,</span> <span class="s2">&quot;O1&quot;</span><span class="p">,</span> <span class="s2">&quot;O2&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="c1"># fmt: on</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">30</span>
    <span class="n">raws</span><span class="p">,</span> <span class="n">ev</span> <span class="o">=</span> <span class="n">_convert_mi</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">)</span>
    <span class="n">sessions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;session_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ii</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;run_0&quot;</span><span class="p">:</span> <span class="n">run</span><span class="p">}</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">raws</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">sessions</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_009_2015</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BBCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 009-2015 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">21</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 21. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="c1"># fmt: off</span>
    <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;fce&quot;</span><span class="p">,</span> <span class="s2">&quot;kw&quot;</span><span class="p">,</span> <span class="s2">&quot;faz&quot;</span><span class="p">,</span> <span class="s2">&quot;fcj&quot;</span><span class="p">,</span> <span class="s2">&quot;fcg&quot;</span><span class="p">,</span> <span class="s2">&quot;far&quot;</span><span class="p">,</span> <span class="s2">&quot;faw&quot;</span><span class="p">,</span> <span class="s2">&quot;fax&quot;</span><span class="p">,</span> <span class="s2">&quot;fcc&quot;</span><span class="p">,</span> <span class="s2">&quot;fcm&quot;</span><span class="p">,</span> <span class="s2">&quot;fas&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fch&quot;</span><span class="p">,</span> <span class="s2">&quot;fcd&quot;</span><span class="p">,</span> <span class="s2">&quot;fca&quot;</span><span class="p">,</span> <span class="s2">&quot;fcb&quot;</span><span class="p">,</span> <span class="s2">&quot;fau&quot;</span><span class="p">,</span> <span class="s2">&quot;fci&quot;</span><span class="p">,</span> <span class="s2">&quot;fav&quot;</span><span class="p">,</span> <span class="s2">&quot;fat&quot;</span><span class="p">,</span> <span class="s2">&quot;fcl&quot;</span><span class="p">,</span> <span class="s2">&quot;fck&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="c1"># fmt: on</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">subjects</span><span class="p">[</span><span class="n">subject</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">BNCIHorizon2020-AMUSE/AMUSE_VP</span><span class="si">{s}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;eog&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>

    <span class="k">return</span> <span class="n">_convert_bbci</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_010_2015</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BBCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 010-2015 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 12. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="c1"># fmt: off</span>
    <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;fat&quot;</span><span class="p">,</span> <span class="s2">&quot;gcb&quot;</span><span class="p">,</span> <span class="s2">&quot;gcc&quot;</span><span class="p">,</span> <span class="s2">&quot;gcd&quot;</span><span class="p">,</span> <span class="s2">&quot;gce&quot;</span><span class="p">,</span> <span class="s2">&quot;gcf&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gcg&quot;</span><span class="p">,</span> <span class="s2">&quot;gch&quot;</span><span class="p">,</span> <span class="s2">&quot;iay&quot;</span><span class="p">,</span> <span class="s2">&quot;icn&quot;</span><span class="p">,</span> <span class="s2">&quot;icr&quot;</span><span class="p">,</span> <span class="s2">&quot;pia&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="c1"># fmt: on</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">subjects</span><span class="p">[</span><span class="n">subject</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">BNCIHorizon2020-RSVP/RSVP_VP</span><span class="si">{s}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">63</span>

    <span class="k">return</span> <span class="n">_convert_bbci</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_012_2015</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BBCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 012-2015 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 12. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;nv&quot;</span><span class="p">,</span> <span class="s2">&quot;nw&quot;</span><span class="p">,</span> <span class="s2">&quot;nx&quot;</span><span class="p">,</span> <span class="s2">&quot;ny&quot;</span><span class="p">,</span> <span class="s2">&quot;nz&quot;</span><span class="p">,</span> <span class="s2">&quot;mg&quot;</span><span class="p">,</span> <span class="s2">&quot;oa&quot;</span><span class="p">,</span> <span class="s2">&quot;ob&quot;</span><span class="p">,</span> <span class="s2">&quot;oc&quot;</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">,</span> <span class="s2">&quot;ja&quot;</span><span class="p">,</span> <span class="s2">&quot;oe&quot;</span><span class="p">]</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">subjects</span><span class="p">[</span><span class="n">subject</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">BNCIHorizon2020-PASS2D/PASS2D_VP</span><span class="si">{s}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">63</span>

    <span class="k">return</span> <span class="n">_convert_bbci</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_load_data_013_2015</span><span class="p">(</span>
    <span class="n">subject</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">BNCI_URL</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load data for 013-2015 dataset.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Subject must be between 1 and 6. Got </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">subject</span><span class="p">)</span>

    <span class="n">data_paths</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;s1&quot;</span><span class="p">,</span> <span class="s2">&quot;s2&quot;</span><span class="p">]:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{u}</span><span class="s2">013-2015/Subject</span><span class="si">{s:02d}</span><span class="s2">_</span><span class="si">{r}</span><span class="s2">.mat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">u</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span>
        <span class="n">data_paths</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">data_path</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">update_path</span><span class="p">))</span>

    <span class="n">raws</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">data_paths</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">squeeze_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">]:</span>
            <span class="n">raw</span><span class="p">,</span> <span class="n">evd</span> <span class="o">=</span> <span class="n">_convert_run_epfl</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
            <span class="n">raws</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
            <span class="n">event_id</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">evd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raws</span><span class="p">,</span> <span class="n">event_id</span>


<span class="k">def</span> <span class="nf">_convert_mi</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Processes (Graz) motor imagery data from MAT files, returns list of</span>
<span class="sd">    recording runs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">runs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">squeeze_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">run_array</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">run_array</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]]</span>

    <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">run_array</span><span class="p">:</span>
        <span class="n">raw</span><span class="p">,</span> <span class="n">evd</span> <span class="o">=</span> <span class="n">_convert_run</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
        <span class="n">event_id</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">evd</span><span class="p">)</span>
    <span class="c1"># change labels to match rest</span>
    <span class="n">standardize_keys</span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">runs</span><span class="p">,</span> <span class="n">event_id</span>


<span class="k">def</span> <span class="nf">standardize_keys</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="n">master_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;both feet&quot;</span><span class="p">,</span> <span class="s2">&quot;feet&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;left hand&quot;</span><span class="p">,</span> <span class="s2">&quot;left_hand&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;right hand&quot;</span><span class="p">,</span> <span class="s2">&quot;right_hand&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;FEET&quot;</span><span class="p">,</span> <span class="s2">&quot;feet&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;HAND&quot;</span><span class="p">,</span> <span class="s2">&quot;right_hand&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;NAV&quot;</span><span class="p">,</span> <span class="s2">&quot;navigation&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;SUB&quot;</span><span class="p">,</span> <span class="s2">&quot;subtraction&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;WORD&quot;</span><span class="p">,</span> <span class="s2">&quot;word_ass&quot;</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="n">master_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">old</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">d</span><span class="p">[</span><span class="n">new</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_convert_run</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">ch_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ch_types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert one run to raw.&quot;&quot;&quot;</span>
    <span class="c1"># parse eeg data</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">n_chan</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">montage</span> <span class="o">=</span> <span class="n">make_standard_montage</span><span class="p">(</span><span class="s2">&quot;standard_1005&quot;</span><span class="p">)</span>
    <span class="n">eeg_data</span> <span class="o">=</span> <span class="mf">1e-6</span> <span class="o">*</span> <span class="n">run</span><span class="o">.</span><span class="n">X</span>
    <span class="n">sfreq</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">fs</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">ch_names</span><span class="p">:</span>
        <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EEG</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_chan</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">montage</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># no montage</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">ch_types</span><span class="p">:</span>
        <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">n_chan</span>

    <span class="n">trigger</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">eeg_data</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
    <span class="c1"># some runs does not contains trials i.e baseline runs</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">trial</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">trigger</span><span class="p">[</span><span class="n">run</span><span class="o">.</span><span class="n">trial</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">y</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

    <span class="n">eeg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">eeg_data</span><span class="p">,</span> <span class="n">trigger</span><span class="p">]</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="n">ch_names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="n">ch_types</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{</span><span class="n">ev</span><span class="p">:</span> <span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">ev</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">classes</span><span class="p">)}</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">create_info</span><span class="p">(</span><span class="n">ch_names</span><span class="o">=</span><span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="o">=</span><span class="n">ch_types</span><span class="p">,</span> <span class="n">sfreq</span><span class="o">=</span><span class="n">sfreq</span><span class="p">)</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">RawArray</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">eeg_data</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span><span class="p">(</span><span class="n">montage</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raw</span><span class="p">,</span> <span class="n">event_id</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_convert_run_p300_sl</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert one p300 run from santa lucia file format.&quot;&quot;&quot;</span>
    <span class="n">montage</span> <span class="o">=</span> <span class="n">make_standard_montage</span><span class="p">(</span><span class="s2">&quot;standard_1005&quot;</span><span class="p">)</span>
    <span class="n">eeg_data</span> <span class="o">=</span> <span class="mf">1e-6</span> <span class="o">*</span> <span class="n">run</span><span class="o">.</span><span class="n">X</span>
    <span class="n">sfreq</span> <span class="o">=</span> <span class="mi">256</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Target stim&quot;</span><span class="p">,</span> <span class="s2">&quot;Flash stim&quot;</span><span class="p">]</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>

    <span class="n">flash_stim</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">y_stim</span>
    <span class="n">flash_stim</span><span class="p">[</span><span class="n">flash_stim</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="n">eeg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">eeg_data</span><span class="p">,</span> <span class="n">run</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">flash_stim</span><span class="p">]</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{</span><span class="n">ev</span><span class="p">:</span> <span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">ev</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">classes</span><span class="p">)}</span>
    <span class="n">event_id</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">ev</span><span class="p">:</span> <span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">ev</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">classes_stim</span><span class="p">)})</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">create_info</span><span class="p">(</span><span class="n">ch_names</span><span class="o">=</span><span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="o">=</span><span class="n">ch_types</span><span class="p">,</span> <span class="n">sfreq</span><span class="o">=</span><span class="n">sfreq</span><span class="p">)</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">RawArray</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">eeg_data</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span><span class="p">(</span><span class="n">montage</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raw</span><span class="p">,</span> <span class="n">event_id</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_convert_bbci</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert one file in bbci format.&quot;&quot;&quot;</span>
    <span class="n">raws</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">struct_as_record</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">squeeze_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]:</span>
        <span class="n">raw</span><span class="p">,</span> <span class="n">evd</span> <span class="o">=</span> <span class="n">_convert_run_bbci</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
        <span class="n">raws</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
        <span class="n">event_id</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">evd</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">raws</span><span class="p">,</span> <span class="n">event_id</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_convert_run_bbci</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">ch_types</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert one run to raw.&quot;&quot;&quot;</span>
    <span class="c1"># parse eeg data</span>
    <span class="n">montage</span> <span class="o">=</span> <span class="n">make_standard_montage</span><span class="p">(</span><span class="s2">&quot;standard_1005&quot;</span><span class="p">)</span>
    <span class="n">eeg_data</span> <span class="o">=</span> <span class="mf">1e-6</span> <span class="o">*</span> <span class="n">run</span><span class="o">.</span><span class="n">X</span>
    <span class="n">sfreq</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">fs</span>

    <span class="n">ch_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span>

    <span class="n">trigger</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">eeg_data</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">trigger</span><span class="p">[</span><span class="n">run</span><span class="o">.</span><span class="n">trial</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">y</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{</span><span class="n">ev</span><span class="p">:</span> <span class="p">(</span><span class="n">ii</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">ev</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">classes</span><span class="p">)}</span>

    <span class="n">flash</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">eeg_data</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">flash</span><span class="p">[</span><span class="n">run</span><span class="o">.</span><span class="n">trial</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">y_stim</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="n">ev_fl</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Stim</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">stim</span><span class="p">):</span> <span class="p">(</span><span class="n">stim</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">stim</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">y_stim</span><span class="p">)}</span>
    <span class="n">event_id</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ev_fl</span><span class="p">)</span>

    <span class="n">eeg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">eeg_data</span><span class="p">,</span> <span class="n">trigger</span><span class="p">,</span> <span class="n">flash</span><span class="p">]</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="n">ch_names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Target&quot;</span><span class="p">,</span> <span class="s2">&quot;Flash&quot;</span><span class="p">]</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="n">ch_types</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">create_info</span><span class="p">(</span><span class="n">ch_names</span><span class="o">=</span><span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="o">=</span><span class="n">ch_types</span><span class="p">,</span> <span class="n">sfreq</span><span class="o">=</span><span class="n">sfreq</span><span class="p">)</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">RawArray</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">eeg_data</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span><span class="p">(</span><span class="n">montage</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raw</span><span class="p">,</span> <span class="n">event_id</span>


<span class="nd">@verbose</span>
<span class="k">def</span> <span class="nf">_convert_run_epfl</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert one run to raw.&quot;&quot;&quot;</span>
    <span class="c1"># parse eeg data</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">montage</span> <span class="o">=</span> <span class="n">make_standard_montage</span><span class="p">(</span><span class="s2">&quot;standard_1005&quot;</span><span class="p">)</span>
    <span class="n">eeg_data</span> <span class="o">=</span> <span class="mf">1e-6</span> <span class="o">*</span> <span class="n">run</span><span class="o">.</span><span class="n">eeg</span>
    <span class="n">sfreq</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">SampleRate</span>

    <span class="n">ch_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">Label</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;eeg&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">ch_names</span><span class="p">)</span>

    <span class="n">trigger</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">eeg_data</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">typ</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">EVENT</span><span class="o">.</span><span class="n">TYP</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]:</span>  <span class="c1"># Error</span>
            <span class="n">trigger</span><span class="p">[</span><span class="n">run</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">EVENT</span><span class="o">.</span><span class="n">POS</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="n">typ</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">]:</span>  <span class="c1"># correct</span>
            <span class="n">trigger</span><span class="p">[</span><span class="n">run</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">EVENT</span><span class="o">.</span><span class="n">POS</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">eeg_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">eeg_data</span><span class="p">,</span> <span class="n">trigger</span><span class="p">]</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="n">ch_names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="n">ch_types</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;stim&quot;</span><span class="p">]</span>
    <span class="n">event_id</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;correct&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">create_info</span><span class="p">(</span><span class="n">ch_names</span><span class="o">=</span><span class="n">ch_names</span><span class="p">,</span> <span class="n">ch_types</span><span class="o">=</span><span class="n">ch_types</span><span class="p">,</span> <span class="n">sfreq</span><span class="o">=</span><span class="n">sfreq</span><span class="p">)</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">RawArray</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">eeg_data</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span><span class="p">(</span><span class="n">montage</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raw</span><span class="p">,</span> <span class="n">event_id</span>


<span class="k">class</span> <span class="nc">MNEBNCI</span><span class="p">(</span><span class="n">BaseDataset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base BNCI dataset&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_get_single_subject_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return data for a single subject&quot;&quot;&quot;</span>
        <span class="n">sessions</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sessions</span>

    <span class="k">def</span> <span class="nf">data_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">update_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="n">load_data</span><span class="p">(</span>
            <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
            <span class="n">dataset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
            <span class="n">update_path</span><span class="o">=</span><span class="n">update_path</span><span class="p">,</span>
            <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
            <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span>
        <span class="p">)</span>


<div class="viewcode-block" id="BNCI2014001"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2014001.html#moabb.datasets.BNCI2014001">[docs]</a><span class="k">class</span> <span class="nc">BNCI2014001</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2014-001 Motor Imagery dataset.</span>

<span class="sd">    Dataset IIa from BCI Competition 4 [1]_.</span>

<span class="sd">    **Dataset Description**</span>

<span class="sd">    This data set consists of EEG data from 9 subjects.  The cue-based BCI</span>
<span class="sd">    paradigm consisted of four different motor imagery tasks, namely the imag-</span>
<span class="sd">    ination of movement of the left hand (class 1), right hand (class 2), both</span>
<span class="sd">    feet (class 3), and tongue (class 4).  Two sessions on different days were</span>
<span class="sd">    recorded for each subject.  Each session is comprised of 6 runs separated</span>
<span class="sd">    by short breaks.  One run consists of 48 trials (12 for each of the four</span>
<span class="sd">    possible classes), yielding a total of 288 trials per session.</span>

<span class="sd">    The subjects were sitting in a comfortable armchair in front of a computer</span>
<span class="sd">    screen.  At the beginning of a trial ( t = 0 s), a fixation cross appeared</span>
<span class="sd">    on the black screen.  In addition, a short acoustic warning tone was</span>
<span class="sd">    presented.  After two seconds ( t = 2 s), a cue in the form of an arrow</span>
<span class="sd">    pointing either to the left, right, down or up (corresponding to one of the</span>
<span class="sd">    four classes left hand, right hand, foot or tongue) appeared and stayed on</span>
<span class="sd">    the screen for 1.25 s.  This prompted the subjects to perform the desired</span>
<span class="sd">    motor imagery task.  No feedback was provided.  The subjects were ask to</span>
<span class="sd">    carry out the motor imagery task until the fixation cross disappeared from</span>
<span class="sd">    the screen at t = 6 s.</span>

<span class="sd">    Twenty-two Ag/AgCl electrodes (with inter-electrode distances of 3.5 cm)</span>
<span class="sd">    were used to record the EEG; the montage is shown in Figure 3 left.  All</span>
<span class="sd">    signals were recorded monopolarly with the left mastoid serving as</span>
<span class="sd">    reference and the right mastoid as ground. The signals were sampled with.</span>
<span class="sd">    250 Hz and bandpass-filtered between 0.5 Hz and 100 Hz. The sensitivity of</span>
<span class="sd">    the amplifier was set to 100 Î¼V . An additional 50 Hz notch filter was</span>
<span class="sd">    enabled to suppress line noise</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    .. [1] Tangermann, M., MÃ¼ller, K.R., Aertsen, A., Birbaumer, N., Braun, C.,</span>
<span class="sd">           Brunner, C., Leeb, R., Mehring, C., Miller, K.J., Mueller-Putz, G.</span>
<span class="sd">           and Nolte, G., 2012. Review of the BCI competition IV.</span>
<span class="sd">           Frontiers in neuroscience, 6, p.55.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;left_hand&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;right_hand&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;feet&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;tongue&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;001-2014&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;imagery&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.3389/fnins.2012.00055&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="BNCI2014002"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2014002.html#moabb.datasets.BNCI2014002">[docs]</a><span class="k">class</span> <span class="nc">BNCI2014002</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2014-002 Motor Imagery dataset.</span>

<span class="sd">    Motor Imagery Dataset from [1]_.</span>

<span class="sd">    **Dataset description**</span>

<span class="sd">    The session consisted of eight runs, five of them for training and three</span>
<span class="sd">    with feedback for validation.  One run was composed of 20 trials.  Taken</span>
<span class="sd">    together, we recorded 50 trials per class for training and 30 trials per</span>
<span class="sd">    class for validation.  Participants had the task of performing sustained (5</span>
<span class="sd">    seconds) kinaesthetic motor imagery (MI) of the right hand and of the feet</span>
<span class="sd">    each as instructed by the cue. At 0 s, a white colored cross appeared on</span>
<span class="sd">    screen, 2 s later a beep sounded to catch the participantâ€™s attention. The</span>
<span class="sd">    cue was displayed from 3 s to 4 s. Participants were instructed to start</span>
<span class="sd">    with MI as soon as they recognized the cue and to perform the indicated MI</span>
<span class="sd">    until the cross disappeared at 8 s. A rest period with a random length</span>
<span class="sd">    between 2 s and 3 s was presented between trials. Participants did not</span>
<span class="sd">    receive feedback during training.  Feedback was presented in form of a</span>
<span class="sd">    white</span>
<span class="sd">    coloured bar-graph.  The length of the bar-graph reflected the amount of</span>
<span class="sd">    correct classifications over the last second.  EEG was measured with a</span>
<span class="sd">    biosignal amplifier and active Ag/AgCl electrodes (g.USBamp, g.LADYbird,</span>
<span class="sd">    Guger Technologies OG, Schiedlberg, Austria) at a sampling rate of 512 Hz.</span>
<span class="sd">    The electrodes placement was designed for obtaining three Laplacian</span>
<span class="sd">    derivations.  Center electrodes at positions C3, Cz, and C4 and four</span>
<span class="sd">    additional electrodes around each center electrode with a distance of 2.5</span>
<span class="sd">    cm, 15 electrodes total.  The reference electrode was mounted on the left</span>
<span class="sd">    mastoid and the ground electrode on the right mastoid.  The 13 participants</span>
<span class="sd">    were aged between 20 and 30 years, 8 naive to the task, and had no known</span>
<span class="sd">    medical or neurological diseases.</span>

<span class="sd">    References</span>
<span class="sd">    -----------</span>

<span class="sd">    .. [1] Steyrl, D., Scherer, R., Faller, J. and MÃ¼ller-Putz, G.R., 2016.</span>
<span class="sd">           Random forests in non-invasive sensorimotor rhythm brain-computer</span>
<span class="sd">           interfaces: a practical and convenient non-linear classifier.</span>
<span class="sd">           Biomedical Engineering/Biomedizinische Technik, 61(1), pp.77-86.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;right_hand&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;feet&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;002-2014&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;imagery&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.1515/bmt-2014-0117&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="BNCI2014004"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2014004.html#moabb.datasets.BNCI2014004">[docs]</a><span class="k">class</span> <span class="nc">BNCI2014004</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2014-004 Motor Imagery dataset.</span>

<span class="sd">    Dataset B from BCI Competition 2008.</span>

<span class="sd">    **Dataset description**</span>

<span class="sd">    This data set consists of EEG data from 9 subjects of a study published in</span>
<span class="sd">    [1]_. The subjects were right-handed, had normal or corrected-to-normal</span>
<span class="sd">    vision and were paid for participating in the experiments.</span>
<span class="sd">    All volunteers were sitting in an armchair, watching a flat screen monitor</span>
<span class="sd">    placed approximately 1 m away at eye level. For each subject 5 sessions</span>
<span class="sd">    are provided, whereby the first two sessions contain training data without</span>
<span class="sd">    feedback (screening), and the last three sessions were recorded with</span>
<span class="sd">    feedback.</span>

<span class="sd">    Three bipolar recordings (C3, Cz, and C4) were recorded with a sampling</span>
<span class="sd">    frequency of 250 Hz.They were bandpass- filtered between 0.5 Hz and 100 Hz,</span>
<span class="sd">    and a notch filter at 50 Hz was enabled.  The placement of the three</span>
<span class="sd">    bipolar recordings (large or small distances, more anterior or posterior)</span>
<span class="sd">    were slightly different for each subject (for more details see [1]).</span>
<span class="sd">    The electrode position Fz served as EEG ground. In addition to the EEG</span>
<span class="sd">    channels, the electrooculogram (EOG) was recorded with three monopolar</span>
<span class="sd">    electrodes.</span>

<span class="sd">    The cue-based screening paradigm consisted of two classes,</span>
<span class="sd">    namely the motor imagery (MI) of left hand (class 1) and right hand</span>
<span class="sd">    (class 2).</span>
<span class="sd">    Each subject participated in two screening sessions without feedback</span>
<span class="sd">    recorded on two different days within two weeks.</span>
<span class="sd">    Each session consisted of six runs with ten trials each and two classes of</span>
<span class="sd">    imagery.  This resulted in 20 trials per run and 120 trials per session.</span>
<span class="sd">    Data of 120 repetitions of each MI class were available for each person in</span>
<span class="sd">    total.  Prior to the first motor im- agery training the subject executed</span>
<span class="sd">    and imagined different movements for each body part and selected the one</span>
<span class="sd">    which they could imagine best (e. g., squeezing a ball or pulling a brake).</span>

<span class="sd">    Each trial started with a fixation cross and an additional short acoustic</span>
<span class="sd">    warning tone (1 kHz, 70 ms).  Some seconds later a visual cue was presented</span>
<span class="sd">    for 1.25 seconds.  Afterwards the subjects had to imagine the corresponding</span>
<span class="sd">    hand movement over a period of 4 seconds.  Each trial was followed by a</span>
<span class="sd">    short break of at least 1.5 seconds.  A randomized time of up to 1 second</span>
<span class="sd">    was added to the break to avoid adaptation</span>

<span class="sd">    For the three online feedback sessions four runs with smiley feedback</span>
<span class="sd">    were recorded, whereby each run consisted of twenty trials for each type of</span>
<span class="sd">    motor imagery.  At the beginning of each trial (second 0) the feedback (a</span>
<span class="sd">    gray smiley) was centered on the screen.  At second 2, a short warning beep</span>
<span class="sd">    (1 kHz, 70 ms) was given. The cue was presented from second 3 to 7.5. At</span>
<span class="sd">    second 7.5 the screen went blank and a random interval between 1.0 and 2.0</span>
<span class="sd">    seconds was added to the trial.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    .. [1] R. Leeb, F. Lee, C. Keinrath, R. Scherer, H. Bischof,</span>
<span class="sd">           G. Pfurtscheller. Brain-computer communication: motivation, aim,</span>
<span class="sd">           and impact of exploring a virtual apartment. IEEE Transactions on</span>
<span class="sd">           Neural Systems and Rehabilitation Engineering 15, 473â€“482, 2007</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;left_hand&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;right_hand&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;004-2014&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;imagery&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.1109/TNSRE.2007.906956&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="BNCI2014008"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2014008.html#moabb.datasets.BNCI2014008">[docs]</a><span class="k">class</span> <span class="nc">BNCI2014008</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2014-008 P300 dataset</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    **Dataset description**</span>

<span class="sd">    This dataset represents a complete record of P300 evoked potentials</span>
<span class="sd">    using a paradigm originally described by Farwell and Donchin [2]_.</span>
<span class="sd">    In these sessions, 8 users with amyotrophic lateral sclerosis (ALS)</span>
<span class="sd">    focused on one out of 36 different characters. The objective in this</span>
<span class="sd">    contest is to predict the correct character in each of the provided</span>
<span class="sd">    character selection epochs.</span>

<span class="sd">    We included in the study a total of eight volunteers, all naÃ¯ve to BCI</span>
<span class="sd">    training. Scalp EEG signals were recorded (g.MOBILAB, g.tec, Austria)</span>
<span class="sd">    from eight channels according to 10â€“10 standard (Fz, Cz, Pz, Oz, P3, P4,</span>
<span class="sd">    PO7 and PO8) using active electrodes (g.Ladybird, g.tec, Austria).</span>
<span class="sd">    All channels were referenced to the right earlobe and grounded to the left</span>
<span class="sd">    mastoid. The EEG signal was digitized at 256 Hz and band-pass filtered</span>
<span class="sd">    between 0.1 and 30 Hz.</span>

<span class="sd">    Participants were required to copy spell seven predefined words of five</span>
<span class="sd">    characters each (runs), by controlling a P300 matrix speller. Rows and</span>
<span class="sd">    columns on the interface were randomly intensified for 125ms, with an</span>
<span class="sd">    inter stimulus interval (ISI) of 125ms, yielding a 250 ms lag between the</span>
<span class="sd">    appearance of two stimuli (stimulus onset asynchrony, SOA).</span>

<span class="sd">    In the first three runs (15 trials in total) EEG data was stored to</span>
<span class="sd">    perform a calibration of the BCI classifier. Thus no feedback was provided</span>
<span class="sd">    to the participant up to this point. A stepwise linear discriminant</span>
<span class="sd">    analysis (SWLDA) was applied to the data from the three calibration runs</span>
<span class="sd">    (i.e., runs 1â€“3) to determine the classifier weights (i.e., classifier</span>
<span class="sd">    coefficients). These weights were then applied during the subsequent four</span>
<span class="sd">    testing runs (i.e., runs 4â€“7) when participants were provided with</span>
<span class="sd">    feedback.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] A. Riccio, L. Simione, F. Schettini, A. Pizzimenti, M. Inghilleri,</span>
<span class="sd">           M. O. Belardinelli, D. Mattia, and F. Cincotti (2013). Attention</span>
<span class="sd">           and P300-based BCI performance in people with amyotrophic lateral</span>
<span class="sd">           sclerosis. Front. Hum. Neurosci., vol. 7:, pag. 732.</span>
<span class="sd">    .. [2] L. A. Farwell and E. Donchin, Talking off the top of your head:</span>
<span class="sd">           toward a mental prosthesis utilizing eventrelated</span>
<span class="sd">           brain potentials, Electroencephalogr. Clin. Neurophysiol.,</span>
<span class="sd">           vol. 70, n. 6, pagg. 510â€“523, 1988.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Target&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;NonTarget&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;008-2014&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;p300&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.3389/fnhum.2013.00732&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="BNCI2014009"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2014009.html#moabb.datasets.BNCI2014009">[docs]</a><span class="k">class</span> <span class="nc">BNCI2014009</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2014-009 P300 dataset.</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    **Dataset description**</span>

<span class="sd">    This dataset presents a complete record of P300 evoked potentials</span>
<span class="sd">    using two different paradigms: a paradigm based on the P300 Speller in</span>
<span class="sd">    overt attention condition and a paradigm based used in covert attention</span>
<span class="sd">    condition. In these sessions, 10 healthy subjects focused on one out of 36</span>
<span class="sd">    different characters. The objective was to predict the correct character</span>
<span class="sd">    in each of the provided character selection epochs.</span>
<span class="sd">    (Note: right now only the overt attention data is available via MOABB)</span>

<span class="sd">    In the first interface, cues are organized in a 6Ã—6 matrix and each</span>
<span class="sd">    character is always visible on the screen and spatially separated from the</span>
<span class="sd">    others. By design, no fixation cue is provided, as the subject is expected</span>
<span class="sd">    to gaze at the target character. Stimulation consists in the</span>
<span class="sd">    intensification of whole lines (rows or columns) of six characters.</span>

<span class="sd">    Ten healthy subjects (10 female, mean age = 26.8 Â± 5.6, table I) with</span>
<span class="sd">    previous experience with P300-based BCIs attended 3 recording sessions.</span>
<span class="sd">    Scalp EEG potentials were measured using 16 Ag/AgCl electrodes that</span>
<span class="sd">    covered the left, right and central scalp (Fz, FCz, Cz, CPz, Pz, Oz, F3,</span>
<span class="sd">    F4, C3, C4, CP3, CP4, P3, P4, PO7, PO8) per the 10-10 standard. Each</span>
<span class="sd">    electrode was referenced to the linked earlobes and grounded to the</span>
<span class="sd">    right mastoid. The EEG was acquired at 256 Hz, high pass- and low</span>
<span class="sd">    pass-filtered with cutoff frequencies of 0.1 Hz and 20 Hz, respectively.</span>
<span class="sd">    Each subject attended 4 recording sessions. During each session,</span>
<span class="sd">    the subject performed three runs with each of the stimulation interfaces.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    .. [1] P AricÃ², F Aloise, F Schettini, S Salinari, D Mattia and F Cincotti</span>
<span class="sd">           (2013). Influence of P300 latency jitter on event related potential-</span>
<span class="sd">           based brainâ€“computer interface performance. Journal of Neural</span>
<span class="sd">           Engineering, vol. 11, number 3.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Target&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;NonTarget&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;009-2014&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;p300&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.1088/1741-2560/11/3/035008&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="BNCI2015001"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2015001.html#moabb.datasets.BNCI2015001">[docs]</a><span class="k">class</span> <span class="nc">BNCI2015001</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2015-001 Motor Imagery dataset.</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    **Dataset description**</span>

<span class="sd">    We acquired the EEG from three Laplacian derivations, 3.5 cm (center-to-</span>
<span class="sd">    center) around the electrode positions (according to International 10-20</span>
<span class="sd">    System of Electrode Placement) C3 (FC3, C5, CP3 and C1), Cz (FCz, C1, CPz</span>
<span class="sd">    and C2) and C4 (FC4, C2, CP4 and C6).  The acquisition hardware was a</span>
<span class="sd">    g.GAMMAsys active electrode system along with a g.USBamp amplifier (g.tec,</span>
<span class="sd">    Guger Tech- nologies OEG, Graz, Austria).  The system sampled at 512 Hz,</span>
<span class="sd">    with a bandpass filter between 0.5 and 100 Hz and a notch filter at 50 Hz.</span>
<span class="sd">    The order of the channels in the data is FC3, FCz, FC4, C5, C3, C1, Cz, C2,</span>
<span class="sd">    C4, C6, CP3, CPz, CP4.</span>

<span class="sd">    The task for the user was to perform sustained right hand versus both feet</span>
<span class="sd">    movement imagery starting from the cue (second 3) to the end of the cross</span>
<span class="sd">    period (sec- ond 8).  A trial started with 3 s of reference period,</span>
<span class="sd">    followed by a brisk audible cue and a visual cue (arrow right for right</span>
<span class="sd">    hand, arrow down for both feet) from second 3 to 4.25.</span>
<span class="sd">    The activity period, where the users received feedback, lasted from</span>
<span class="sd">    second 4 to 8. There was a random 2 to 3 s pause between the trials.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    .. [1] J. Faller, C. Vidaurre, T. Solis-Escalante, C. Neuper and R.</span>
<span class="sd">           Scherer (2012). Autocalibration and recurrent adaptation: Towards a</span>
<span class="sd">           plug and play online ERD- BCI.  IEEE Transactions on Neural Systems</span>
<span class="sd">           and Rehabilitation Engineering, 20(3), 313-319.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># FIXME: some participant have 3 sessions</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;right_hand&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;feet&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;001-2015&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;imagery&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.1109/tnsre.2012.2189584&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="BNCI2015003"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2015003.html#moabb.datasets.BNCI2015003">[docs]</a><span class="k">class</span> <span class="nc">BNCI2015003</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2015-003 P300 dataset.</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    **Dataset description**</span>

<span class="sd">    This dataset contains recordings from 10 subjects performing a visual P300</span>
<span class="sd">    task for spelling. Results were published in [1]_. Sampling frequency was</span>
<span class="sd">    256 Hz and there were 8 electrodes (&#39;Fz&#39;, &#39;Cz&#39;, &#39;P3&#39;, &#39;Pz&#39;, &#39;P4&#39;, &#39;PO7&#39;,</span>
<span class="sd">    &#39;Oz&#39;, &#39;PO8&#39;) which were referenced to the right earlobe. Each subject</span>
<span class="sd">    participated in only one session. For more information, see [1]_.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    .. [1]  C. Guger, S. Daban, E. Sellers, C. Holzner, G. Krausz,</span>
<span class="sd">            R. Carabalona, F. Gramatica, and G. Edlinger (2009). How many</span>
<span class="sd">            people are able to control a P300-based brain-computer interface</span>
<span class="sd">            (BCI)?. Neuroscience Letters, vol. 462, pp. 94â€“98.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Target&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;NonTarget&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;003-2015&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;p300&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.1016/j.neulet.2009.06.045&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="BNCI2015004"><a class="viewcode-back" href="../../../generated/moabb.datasets.BNCI2015004.html#moabb.datasets.BNCI2015004">[docs]</a><span class="k">class</span> <span class="nc">BNCI2015004</span><span class="p">(</span><span class="n">MNEBNCI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;BNCI 2015-004 Motor Imagery dataset.</span>

<span class="sd">    Dataset from [1]_.</span>

<span class="sd">    **Dataset description**</span>

<span class="sd">    We provide EEG data recorded from nine users with disability (spinal cord</span>
<span class="sd">    injury and stroke) on two different days (sessions).  Users performed,</span>
<span class="sd">    follow- ing a cue-guided experimental paradigm, five distinct mental tasks</span>
<span class="sd">    (MT).  MTs include mental word association (condition WORD), mental</span>
<span class="sd">    subtraction (SUB), spatial navigation (NAV), right hand motor imagery</span>
<span class="sd">    (HAND) and</span>
<span class="sd">    feet motor imagery (FEET). Details on the experimental paradigm are</span>
<span class="sd">    summarized in Figure 1.  The session for a single subject consisted of 8</span>
<span class="sd">    runs resulting in 40 trials of each class for each day.  One single</span>
<span class="sd">    experimental run consisted of 25 cues, with 5 of each mental task.  Cues</span>
<span class="sd">    were presented in random order.</span>

<span class="sd">    EEG was recorded from 30 electrode channels placed on the scalp according</span>
<span class="sd">    to the international 10-20 system.  Electrode positions included channels</span>
<span class="sd">    AFz, F7, F3, Fz, F4, F8, FC3, FCz, FC4, T3, C3, Cz, C4, T4, CP3, CPz,CP4,</span>
<span class="sd">    P7, P5, P3, P1, Pz, P2, P4, P6, P8, PO3, PO4, O1, and O2.  Reference and</span>
<span class="sd">    ground were placed at the left and right mastoid, respectively.  The g.tec</span>
<span class="sd">    GAMMAsys system with g.LADYbird active electrodes and two g.USBamp</span>
<span class="sd">    biosignal</span>
<span class="sd">    amplifiers (Guger Technolgies, Graz, Austria) was used for recording.  EEG</span>
<span class="sd">    was band pass filtered 0.5-100 Hz (notch filter at 50 Hz) and sampled at a</span>
<span class="sd">    rate of 256 Hz.</span>

<span class="sd">    The duration of a single imagery trials is 10 s.  At t = 0 s, a cross was</span>
<span class="sd">    presented in the middle of the screen.  Participants were asked to relax</span>
<span class="sd">    and</span>
<span class="sd">    fixate the cross to avoid eye movements.  At t = 3 s, a beep was sounded to</span>
<span class="sd">    get the participantâ€™s attention.  The cue indicating the requested imagery</span>
<span class="sd">    task, one out of five graphical symbols, was presented from t = 3 s to t =</span>
<span class="sd">    4.25 s.  At t = 10 s, a second beep was sounded and the fixation-cross</span>
<span class="sd">    disappeared, which indicated the end of the trial.  A variable break</span>
<span class="sd">    (inter-trial-interval, ITI) lasting between 2.5 s and 3.5 s occurred</span>
<span class="sd">    before</span>
<span class="sd">    the start of the next trial.  Participants were asked to avoid movements</span>
<span class="sd">    during the imagery period, and to move and blink during the</span>
<span class="sd">    ITI. Experimental runs began and ended with a blank screen (duration 4 s)</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>

<span class="sd">    .. [1] Scherer R, Faller J, Friedrich EVC, Opisso E, Costa U, KÃ¼bler A, et</span>
<span class="sd">           al. (2015) Individually Adapted Imagery Improves Brain-Computer</span>
<span class="sd">           Interface Performance in End-Users with Disability. PLoS ONE 10(5).</span>
<span class="sd">           https://doi.org/10.1371/journal.pone.0123727</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">subjects</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span>
            <span class="n">sessions_per_subject</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">right_hand</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">feet</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">navigation</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">subtraction</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">word_ass</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;004-2015&quot;</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
            <span class="n">paradigm</span><span class="o">=</span><span class="s2">&quot;imagery&quot;</span><span class="p">,</span>
            <span class="n">doi</span><span class="o">=</span><span class="s2">&quot;10.1371/journal.pone.0123727&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright 2018-2021, Alexandre Barachant, Sylvain Chevallier.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>